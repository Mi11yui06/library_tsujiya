<% @document_title = "貸出確認画面" %>
<div class="pb-2 border-bottom mb-3 d-flex justify-content-between align-items-start">
    <h1 class="h3">貸出確認</h1>
</div>

<p>この内容で登録しますか？</p>
<table class="table table-bordered border-dark">
    <tr>
        <th class="table-secondary" style="width: 20%">会員ID</th>
        <td><%= @loan.member_id %></td>
    </tr>
    <tr>
        <th class="table-secondary" style="width: 20%">会員名</th>
        <td><%= @loan.member.name %></td>
    </tr>
    <tr>
        <th class="table-secondary" style="width: 20%">貸出年月日</th>
        <td><%= @loan.loan_date %></td>
    </tr>


    <% @loan_available.times do |i| %>
        <tr>
            <th class="table-secondary"><%= "資料ID ##{i + 1}" %></th>
            <td><%= @stocks[i].id %></td>
        </tr>
        <tr>
            <th class="table-secondary"><%= "資料名 ##{i + 1}" %></th>
            <td><%= @stocks[i].name %></td>
        </tr>
        <tr>
            <th class="table-secondary"><%= "返却期限 ##{i + 1}" %></th>
            <td><%= @due_dates[i] %></td>
        </tr>
    <% end %>
</table>

<p><%= form_with model: @loan, url: loans_path, method: :post do |f| %>
    <%= f.hidden_field :member_id %>
    <%= f.hidden_field :loan_date %>
    
    <% @loan_available.times do |i| %>
        <%= f.hidden_field "stock_ids[]", value: @stocks[i].id %>
        <%= f.hidden_field "due_dates[]", value: @due_dates[i] %>
    <% end %>
    
    <%= f.submit '貸出を確定する', class: "btn btn-outline-primary" %>
<% end %></p>

<p><%= link_to 'キャンセル', new_loan_path %></p>